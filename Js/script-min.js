angular.module("app",["ngRoute"]).controller("homePageCtrl",["$scope","$http","$rootScope",function(e,t,o){o.usericon="images/user-icon.png";let r=localStorage.getItem("isLoggedIn");o.usericon="true"===r?"images/pic.png":"images/user-icon.png",t.get("/api/getData").then(function(t){o.courses=t.data,e.courses=t.data})}]).controller("CourseDetailCtrl",["$scope","$routeParams","$http","$window",function(e,t,o,r){e.showInputBox=!1,e.warningMsg=!1,e.id="/get/"+t.id,o.get(e.id).then(function(t){t.data?e.course=t.data:r.location.href="#"}),e.checkUpdate=function(){"true"===localStorage.getItem("isLoggedIn")?e.showInputBox=!0:e.warningMsg=!0},e.update=function(){let l="/update/course?id="+t.id+"&newName="+e.updatedCourse;o.post(l).then(function(e){"0"===e.data?r.alert("INTERNAL SERVER ERROR, please try after sometime..."):r.alert("Course Updated Successfully.")}),e.updatedCourse=""}}]).controller("signInCtrl",["$scope","$http","$window",function(e,t,o){e.submit=function(){let r="/auth?username="+e.username+"&password="+e.password;console.log(r),t.get(r).then(function(t){let r=t.data,l=r.resCode;localStorage.setItem("name",r.name),"1"===l?(o.alert("Logged-In Successfully"),e.remember&&localStorage.setItem("isLoggedIn",!0),o.location.href="#"):"2"===l?o.alert("Wrong Password Entered"):"3"===l?o.alert("User Doesn't Exist, Please Create New Account"):o.alert("INTERNAL SERVER ERROR")})}}]).controller("signUpCtrl",["$scope","$http","$window",function(e,t,o){e.submit=function(){let r="/signup?uname="+e.username+"&name="+e.name+"&password="+e.password;t.post(r).then(function(e){"0"===e.data?o.alert("User already exist or INTERNAL SERVER ERROR"):(o.alert("Account Created Successfully, Please Sign-in Again.."),o.location.href="#!/user/signIn")})}}]).controller("profileCtrl",["$scope","$window","$http",function(e,t,o){e.signOut=function(){o.get("/signout").then(function(e){localStorage.setItem("isLoggedIn",!1),t.alert("Sign-Out Successfully"),t.location.href="#!/user/signIn"},function(e){t.alert("INTERNAL SERVER ERROR")})},e.name=localStorage.getItem("name")}]).controller("searchCtrl",["$scope","$http","$rootScope",function(e,t,o){e.selectedOptionAuthor="All",e.selectedOptionCourse="All",e.courses=o.courses,e.selectListAuthor={All:e.courses.length},e.selectListCourse={All:e.courses.length};for(let t of e.courses)e.selectListAuthor[`${t.value.author}`]?e.selectListAuthor[`${t.value.author}`]+=1:e.selectListAuthor[`${t.value.author}`]=1;for(let t of e.courses)e.selectListCourse[`${t.id}`]?e.selectListCourse[`${t.id}`]+=1:e.selectListCourse[`${t.id}`]=1}]).directive("dropDown",function(){return{scope:{selectList:"=",selected:"="},restrict:"E",templateUrl:"optionTemplate.html",link:function(e,t,o){e.show=!1,e.toggleOptions=function(){e.show=!e.show},e.selectOption=function(t){e.selected=t,e.show=!1,e.$root.selected="All"===t?"":t}}}}).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/homePage.html",controller:"homePageCtrl"}).when("/user/signIn",{templateUrl:function(){let e=localStorage.getItem("isLoggedIn");return localStorage.userCtrl="true"===e?"profileCtrl":"signInCtrl","true"===e?"/profile.html":"/signIn.html"},controller:localStorage.getItem("userCtrl")}).when("/user/profile",{templateUrl:"/profile.html",controller:"profileCtrl"}).when("/user/signUp",{templateUrl:"/signUp.html",controller:"signUpCtrl"}).when("/courses/search",{templateUrl:"/search.html",controller:"searchCtrl"}).when("/:id",{templateUrl:"/CourseDetail.html",controller:"CourseDetailCtrl"})}]);